{"ast":null,"code":"var _jsxFileName = \"/Users/pbivrell/light/light/src/components/Picker2.js\",\n    _s = $RefreshSig$();\n\nimport './Picker2.css';\nimport React, { useState, useEffect } from \"react\";\nimport { HuePicker, AlphaPicker } from 'react-color';\nimport bulb from '../res/Bulb_crop.png';\nimport offbulb from '../res/OffBulb_crop.png';\nimport disconnectedbulb from '../res/DisconnectedBulb_crop.png';\nimport axios from \"axios\";\nimport { displayError } from \"../lib/hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Picker2(_ref) {\n  _s();\n\n  let {\n    name,\n    light,\n    initalState\n  } = _ref;\n  useEffect(() => {\n    getLight();\n  }, [light]);\n  const [bulbState, setBulbState] = useState(initalState);\n  const [color, setColor] = useState({\n    hsl: {\n      a: 1\n    },\n    rgb: {},\n    hex: \"\"\n  });\n\n  function getLight() {\n    if (!light || !light.IP) {\n      return;\n    }\n\n    axios.get(`http://${light.IP}/status`, {\n      timeout: 1000\n    }).then(resp => {\n      setBulbState(1);\n    }).catch(e => {\n      setBulbState(2);\n      displayError(e);\n    });\n  }\n\n  function pushLight() {\n    let data = generateBinary(color.rgb, 50);\n    let blob = new Blob([data], {\n      type: \"application/octet-stream\"\n    });\n    let bodyFormData = new FormData();\n    bodyFormData.append(\"file\", blob, \"dummy.bin\");\n    axios({\n      method: \"post\",\n      url: `http://${light.IP}/upload`,\n      data: bodyFormData,\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(function (response) {\n      console.log(response);\n    }).catch(function (response) {\n      displayError(response);\n    });\n  }\n\n  function pushToggle() {\n    axios.get(`http://${light.IP}/toggle`, {\n      timeout: 1000\n    }).then(resp => {\n      console.log(\"toggled\");\n    }).catch(e => {\n      displayError(e);\n    });\n  }\n\n  function toggleBulb() {\n    if (bulbState == 2) {\n      getLight();\n      return;\n    } else if (bulbState == 1) {\n      setBulbState(0);\n    } else {\n      setBulbState(1);\n    }\n\n    pushToggle();\n  }\n\n  function onColorChange(hue, c) {\n    console.log(c);\n    let hsl = c.hsl;\n\n    if (!hue) {\n      hsl.a = color.hsl.a;\n    }\n\n    setColor({\n      hsl: hsl,\n      rgb: c.rgb,\n      hex: `rgba(${c.rgb.r},${c.rgb.g},${c.rgb.b},${hsl.a}`\n    });\n    pushLight();\n  }\n\n  function generateBinary(color, pixels) {\n    let data = new Uint8Array((2 + pixels) * 8);\n    let bytes = getInt64Bytes(pixels);\n    let count = bytes[bytes.length - 2] << 8 | bytes[bytes.length - 1];\n    data[0] = 0x3;\n    data[1] = bytes[bytes.length - 1];\n    data[2] = bytes[bytes.length - 2];\n\n    for (let i = 0; i < pixels; i++) {\n      let bytes = getInt64Bytes(i);\n      data[(i + 1) * 8] = 0x1;\n      data[(i + 1) * 8 + 1] = color.r;\n      data[(i + 1) * 8 + 2] = color.g;\n      data[(i + 1) * 8 + 3] = color.b;\n      data[(i + 1) * 8 + 4] = bytes[bytes.length - 1];\n      data[(i + 1) * 8 + 5] = bytes[bytes.length - 2];\n    }\n\n    data[8 + pixels * 8] = 0x2;\n    data[8 + pixels * 8 + 1] = 200;\n    data[8 + pixels * 8 + 2] = 0;\n    data[8 + pixels * 8 + 3] = 0;\n    data[8 + pixels * 8 + 4] = 0;\n    console.log(data);\n    return data;\n  }\n\n  function getInt64Bytes(x) {\n    let y = Math.floor(x / 2 ** 32);\n    return [y, y << 8, y << 16, y << 24, x, x << 8, x << 16, x << 24].map(z => z >>> 24);\n  }\n\n  function getToolTip() {\n    if (!light || Object.keys(light).length === 0) {\n      return \"\";\n    }\n\n    return `ID: ${light.ID}\nIP: ${light.IP}\nVersion: ${light.Version}\n${new Date(light.Updated).toLocaleDateString() + \" \" + new Date(light.Updated).toLocaleTimeString()}`;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Picker\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ButtonText\",\n      \"data-tooltip\": getToolTip(),\n      children: name.alias\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Button\",\n      style: {\n        background: color.hex\n      },\n      onClick: toggleBulb,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"ButtonImage\",\n        src: bulbState === 0 ? bulb : bulbState === 1 ? offbulb : disconnectedbulb\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 3\n    }, this), bulbState === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(HuePicker, {\n        className: \"ButtonImage\",\n        color: color.hsl,\n        onChangeComplete: c => onColorChange(false, c)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(AlphaPicker, {\n        className: \"ButtonImage\",\n        color: color.hsl,\n        onChangeComplete: c => onColorChange(true, c)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 2\n  }, this);\n}\n\n_s(Picker2, \"Xcwe0Y+iXUZSQP3WbNrOTTldOFw=\");\n\n_c = Picker2;\nexport default Picker2;\n\nvar _c;\n\n$RefreshReg$(_c, \"Picker2\");","map":{"version":3,"sources":["/Users/pbivrell/light/light/src/components/Picker2.js"],"names":["React","useState","useEffect","HuePicker","AlphaPicker","bulb","offbulb","disconnectedbulb","axios","displayError","Picker2","name","light","initalState","getLight","bulbState","setBulbState","color","setColor","hsl","a","rgb","hex","IP","get","timeout","then","resp","catch","e","pushLight","data","generateBinary","blob","Blob","type","bodyFormData","FormData","append","method","url","headers","response","console","log","pushToggle","toggleBulb","onColorChange","hue","c","r","g","b","pixels","Uint8Array","bytes","getInt64Bytes","count","length","i","x","y","Math","floor","map","z","getToolTip","Object","keys","ID","Version","Date","Updated","toLocaleDateString","toLocaleTimeString","alias","background"],"mappings":"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","sourcesContent":["import './Picker2.css';\nimport React, { useState, useEffect } from \"react\";\nimport { HuePicker, AlphaPicker } from 'react-color'\nimport bulb from '../res/Bulb_crop.png';\nimport offbulb from '../res/OffBulb_crop.png';\nimport disconnectedbulb from '../res/DisconnectedBulb_crop.png';\nimport axios from \"axios\";\nimport {displayError} from \"../lib/hooks\";\n\nfunction Picker2({name, light, initalState}) {\n\n\tuseEffect(() => {\n\t\tgetLight();\n\t}, [light])\n\n\n\tconst [bulbState, setBulbState] = useState(initalState);\n\n  \tconst [color, setColor] = useState({ hsl: {a: 1}, rgb: {}, hex: \"\"});\n\t\n\tfunction getLight() {\n\t\tif (!light || !light.IP) {\n\t\t\treturn\n\t\t}\n\t\taxios.get(`http://${light.IP}/status`, {timeout: 1000})\n\t\t.then((resp) =>{\n\t\t\tsetBulbState(1);\n\t\t})\n\t\t.catch((e) => {\n\t\t\tsetBulbState(2);\n\t\t\tdisplayError(e);\n\t\t});\n\t}\n\n\tfunction pushLight() {\n\t\tlet data = generateBinary(color.rgb, 50);\n                let blob = new Blob([data], {type: \"application/octet-stream\"});\n                let bodyFormData = new FormData();\n                bodyFormData.append(\"file\", blob, \"dummy.bin\");\n\n                axios({\n                \tmethod: \"post\",\n                \turl: `http://${light.IP}/upload`,\n                \tdata: bodyFormData,\n                \theaders: { \"Content-Type\": \"multipart/form-data\" },\n                })\n                .then(function (response) {\n                \tconsole.log(response);\n                })\n                .catch(function (response) {\n                \tdisplayError(response)\n                });\n\t}\n\n\tfunction pushToggle() {\n\t\t\n\t\taxios.get(`http://${light.IP}/toggle`, {timeout: 1000})\n\t\t.then((resp) => {\n\t\t\tconsole.log(\"toggled\");\n\t\t})\n\t\t.catch((e) => {\n        \t\tdisplayError(e);\n\t\t});\n\t}\n\n\tfunction toggleBulb() {\n\t\tif (bulbState == 2) {\n\t\t\tgetLight();\n\t\t\treturn;\n\t\t}else if(bulbState == 1) {\n\t\t\tsetBulbState(0);\n\t\t}else {\n\t\t\tsetBulbState(1);\n\t\t}\n\n\t\tpushToggle();\n\t}\n\n\tfunction onColorChange(hue, c) {\n\n\t\tconsole.log(c);\n\n\t\tlet hsl = c.hsl;\n\n\t\tif(!hue) {\n\t\t\thsl.a = color.hsl.a;\n\t\t}\n\t\tsetColor({hsl: hsl, rgb: c.rgb, hex: `rgba(${c.rgb.r},${c.rgb.g},${c.rgb.b},${hsl.a}`});\n\t\t\n\t\tpushLight();\n\t}\n\t\n\t\n\tfunction generateBinary(color, pixels) {\n\t\t\n\t\tlet data = new Uint8Array((2 + pixels) * 8);\n\t\tlet bytes = getInt64Bytes(pixels);\n\n\t\tlet count = (bytes[bytes.length-2] << 8) | bytes[bytes.length-1];\n\t\t\n\t\tdata[0] = 0x3;\n\t\tdata[1] = bytes[bytes.length-1];\n\t\tdata[2] = bytes[bytes.length-2];\n\n\t\tfor (let i = 0; i < pixels; i++) {\n\t\t\tlet bytes = getInt64Bytes(i);\n\t\t \tdata[(i + 1) * 8] = 0x1;\n\t\t\tdata[(i + 1) * 8 + 1] = color.r;\n\t\t\tdata[(i + 1) * 8 + 2] = color.g;\n\t\t\tdata[(i + 1) * 8 + 3] = color.b;\n\t\t\tdata[(i + 1) * 8 + 4] = bytes[bytes.length-1];\n\t\t\tdata[(i + 1) * 8 + 5] = bytes[bytes.length-2];\n\t\t}\n\n\t\tdata[8 + (pixels * 8)] = 0x2;\n\t\tdata[8 + (pixels * 8) + 1] = 200;\n\t\tdata[8 + (pixels * 8) + 2] = 0;\n\t\tdata[8 + (pixels * 8) + 3] = 0;\n\t\tdata[8 + (pixels * 8) + 4] = 0;\n\n\n\t\tconsole.log(data);\n\t\treturn data;\n\n\t}\n\n\tfunction getInt64Bytes(x) {\n  \t\tlet y= Math.floor(x/2**32);\n  \t\treturn [y,(y<<8),(y<<16),(y<<24), x,(x<<8),(x<<16),(x<<24)].map(z=> z>>>24)\n\t}\n\n\tfunction getToolTip() {\n\t\tif (!light || Object.keys(light).length === 0) {\n\t\t\treturn \"\"\n\t\t}\n\t\treturn `ID: ${light.ID}\nIP: ${light.IP}\nVersion: ${light.Version}\n${new Date(light.Updated).toLocaleDateString() +\" \" +  new Date(light.Updated).toLocaleTimeString()}`\n\t}\n\n\treturn (\n\t<div className=\"Picker\">\n\n\t\t<div className=\"ButtonText\" data-tooltip={getToolTip()}>{name.alias}</div>\n\t\t<div className=\"Button\" style={{background: color.hex}} onClick={toggleBulb}>\n\t\t\t<img className=\"ButtonImage\" src={bulbState === 0 ? bulb : bulbState === 1 ? offbulb : disconnectedbulb }></img>\n\t\t</div>\n\t\t{ bulbState === 0 ? \n\t\t\t<>\n\t\t\t\t<br/>\n\t\t\t\t<HuePicker className=\"ButtonImage\" color={color.hsl} onChangeComplete={(c) => onColorChange(false, c)}/>\n\t\t\t\t<br/>\n                \t\t<AlphaPicker className=\"ButtonImage\" color={color.hsl} onChangeComplete={(c) => onColorChange(true, c)}/>\n\t\t\t</>\n\t\t: \n\t\t\t<></>\n\t\t}\n\t</div>\n  \t);\n}\n\n\nexport default Picker2;\n"]},"metadata":{},"sourceType":"module"}