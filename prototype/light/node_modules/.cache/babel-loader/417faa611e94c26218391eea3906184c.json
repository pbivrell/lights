{"ast":null,"code":"var _jsxFileName = \"/Users/pbivrell/light/light/src/containers/programming.js\",\n    _s = $RefreshSig$();\n\nimport '../App.css';\nimport React, { useState, useEffect } from \"react\";\nimport { Stage, Layer } from 'react-konva';\nimport Bulb from \"../components/Bulb.js\"; // 00000001\n// 11110100\n// 00000001\n// 00000000\n// 00000000\n// 00000000\n// 00000000\n// 00000000\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Programming() {\n  _s();\n\n  const seq = \"0000001100001010000000000000000000000000000000000000000000000000000000101111010000000001000000000000000000000000000000000000000000000001000000001000000000000000000000000000000000000000000000000000000100000000100000000000000000000001000000000000000000000000000000010000000010000000000000000000001000000000000000000000000000000001000000001000000000000000000000110000000000000000000000000000000100000000100000000000000000000100000000000000000000000000000000101111010000000001000000000000000000000000000000000000000000000001100000001000000000000000000000000000000000000000000000000000000110000000100000000000000000000001000000000000000000000000000000011000000010000000000000000000001000000000000000000000000000000001100000001000000000000000000000110000000000000000000000000000000110000000100000000000000000000100000000000000000000000000\"; //const seq = \"000000101111010000000001000000000000000000000000000000000000000000000001000000001000000000000000000000000000000000000000000000000000000100000000100000000000000000000001000000000000000000000000000000010000000010000000000000000000001000000000000000000000000000000001000000001000000000000000000000110000000000000000000000000000000100000000100000000000000000000100000000000000000000000000000000101111010000000001000000000000000000000000000000000000000000000001100000001000000000000000000000000000000000000000000000000000000110000000100000000000000000000001000000000000000000000000000000011000000010000000000000000000001000000000000000000000000000000001100000001000000000000000000000110000000000000000000000000000000110000000100000000000000000000100000000000000000000000000\";\n\n  function processSequence() {\n    var bytes = new Uint8Array(seq.length);\n\n    for (var i = 0; i < seq.length; i += 8) {\n      console.log(seq.slice(i, i + 8), parseInt(seq.slice(i, i + 8), 2));\n      bytes[Math.floor(i / 8)] = parseInt(seq.slice(i, i + 8), 2);\n    }\n\n    let nextColors = [];\n    let delay = 0;\n\n    for (var i = 0; i < bytes.length; i += 8) {\n      if (bytes[i] === 0x3 && i == 0) {\n        let count = bytes[i + 5] << 8 | bytes[i + 4];\n        console.log(\"Count\");\n\n        for (const i = 0; i < count; i++) {\n          nextColors.push({\n            color: `rgb(255, 255, 255)`\n          });\n        }\n      } else if (bytes[i] === 0x1) {\n        console.log(\"color\");\n        let r = bytes[i + 1];\n        let g = bytes[i + 2];\n        let b = bytes[i + 3];\n        let index = bytes[i + 5] << 8 | bytes[i + 4];\n        nextColors[i]({\n          color: `rgb(${r},${g},${b})`,\n          index: index,\n          delay: delay\n        });\n      } else {\n        delay += bytes[i + 4] << 24 | bytes[i + 3] << 16 | bytes[i + 2] << 8 | bytes[i + 1];\n        setTimeout(function () {\n          setColors(nextColors);\n        }, delay);\n      }\n    }\n\n    console.log(nextColors);\n  }\n\n  useEffect(() => {\n    processSequence();\n  }, []);\n  const lights = [{\n    color: \"rgb(0,255,0)\"\n  }, {\n    color: \"rgb(0,255,0)\"\n  }, {\n    color: \"rgb(0,255,0)\"\n  }, {\n    color: \"rgb(0,255,0)\"\n  }, {\n    color: \"rgb(0,255,0)\"\n  }, {\n    color: \"rgb(0,255,0)\",\n    delay: 500\n  }, {\n    color: \"rgb(0,255,0)\"\n  }];\n  const rows = Math.floor((window.innerWidth - 200) / 170);\n  const radius = 50;\n  const xOffset = 120;\n  const yOffset = 120;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: /*#__PURE__*/_jsxDEV(Stage, {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        children: /*#__PURE__*/_jsxDEV(Layer, {\n          children: lights.map(function (elem, idx) {\n            return /*#__PURE__*/_jsxDEV(Bulb, {\n              x: xOffset + xOffset * (idx % rows),\n              y: yOffset + yOffset * Math.floor(idx / rows),\n              delay: elem.delay,\n              color: elem.color,\n              radius: radius\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 2\n  }, this);\n}\n\n_s(Programming, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Programming;\nexport default Programming;\n\nvar _c;\n\n$RefreshReg$(_c, \"Programming\");","map":{"version":3,"sources":["/Users/pbivrell/light/light/src/containers/programming.js"],"names":["React","useState","useEffect","Stage","Layer","Bulb","Programming","seq","processSequence","bytes","Uint8Array","length","i","console","log","slice","parseInt","Math","floor","nextColors","delay","count","push","color","r","g","b","index","setTimeout","setColors","lights","rows","window","innerWidth","radius","xOffset","yOffset","innerHeight","map","elem","idx"],"mappings":"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","sourcesContent":["import '../App.css';\nimport React, { useState, useEffect } from \"react\";\nimport { Stage, Layer } from 'react-konva';\nimport Bulb from \"../components/Bulb.js\"\n\n// 00000001\n// 11110100\n// 00000001\n// 00000000\n// 00000000\n// 00000000\n// 00000000\n// 00000000\n\nfunction Programming () {\n\n\tconst seq = \"0000001100001010000000000000000000000000000000000000000000000000000000101111010000000001000000000000000000000000000000000000000000000001000000001000000000000000000000000000000000000000000000000000000100000000100000000000000000000001000000000000000000000000000000010000000010000000000000000000001000000000000000000000000000000001000000001000000000000000000000110000000000000000000000000000000100000000100000000000000000000100000000000000000000000000000000101111010000000001000000000000000000000000000000000000000000000001100000001000000000000000000000000000000000000000000000000000000110000000100000000000000000000001000000000000000000000000000000011000000010000000000000000000001000000000000000000000000000000001100000001000000000000000000000110000000000000000000000000000000110000000100000000000000000000100000000000000000000000000\"\n\n\t//const seq = \"000000101111010000000001000000000000000000000000000000000000000000000001000000001000000000000000000000000000000000000000000000000000000100000000100000000000000000000001000000000000000000000000000000010000000010000000000000000000001000000000000000000000000000000001000000001000000000000000000000110000000000000000000000000000000100000000100000000000000000000100000000000000000000000000000000101111010000000001000000000000000000000000000000000000000000000001100000001000000000000000000000000000000000000000000000000000000110000000100000000000000000000001000000000000000000000000000000011000000010000000000000000000001000000000000000000000000000000001100000001000000000000000000000110000000000000000000000000000000110000000100000000000000000000100000000000000000000000000\";\n\n\tfunction processSequence() {\n\t\tvar bytes = new Uint8Array(seq.length);\n\t\tfor (var i=0; i<seq.length; i+=8) {\n\t\t\tconsole.log(seq.slice(i, i + 8), parseInt(seq.slice(i, i + 8), 2));\n    \t\t\tbytes[Math.floor(i/8)] = parseInt(seq.slice(i,i+8), 2);\n\t\t}\n\n\t\tlet nextColors = [];\n\t\t\n\t\tlet delay = 0;\n\t\t\t\n\t\tfor (var i=0; i<bytes.length; i+=8) {\n\t\t\tif (bytes[i] === 0x3 && i == 0) {\n\t\t\t\tlet count = (bytes[i+5] << 8) | bytes[i+4];\n\t\t\t\tconsole.log(\"Count\");\n\t\t\t\tfor (const i = 0; i < count; i++) {\n\t\t\t\t\tnextColors.push({color: `rgb(255, 255, 255)`})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else if (bytes[i] === 0x1) {\n\t\t\t\tconsole.log(\"color\");\n\t\t\t\tlet r = bytes[i+1];\n\t\t\t\tlet g = bytes[i+2];\n\t\t\t\tlet b =  bytes[i+3];\n\t\t\t\tlet index = (bytes[i+5] << 8) | bytes[i+4];\n\t\t\t\tnextColors[i]({color: `rgb(${r},${g},${b})`, index: index, delay: delay})\n\t\t\t}else {\n\t\t\t\tdelay += (bytes[i+4] << 24) | (bytes[i+3] << 16) | (bytes[i+2] << 8) | bytes[i+1];\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsetColors(nextColors);\n\t\t\t\t}, delay)\n\t\t\t}\n\t\t}\n\t\tconsole.log(nextColors);\n\t}\n\n\tuseEffect(() => {\n\t\tprocessSequence();\t\n\t}, []);\n\n\tconst lights = [{color: \"rgb(0,255,0)\"},{color: \"rgb(0,255,0)\"},{color: \"rgb(0,255,0)\"},{color: \"rgb(0,255,0)\"},{color: \"rgb(0,255,0)\"},{color: \"rgb(0,255,0)\", delay: 500},{color: \"rgb(0,255,0)\"},];\n\tconst rows = Math.floor((window.innerWidth - 200) / 170);\n\tconst radius = 50;\n\tconst xOffset = 120;\n\tconst yOffset = 120;\n\n\treturn (\n\t<div className=\"App\">\n\t\t<header className=\"App-header\">\n\t\t\t<Stage width={window.innerWidth} height={window.innerHeight}>\n      \t\t\t\t<Layer>\n\t\t\t\t\t{\n\t\t\t\t\t\tlights.map( function(elem, idx) {\n\t\t\t\t\t\t\treturn <Bulb x={xOffset + (xOffset * (idx % rows))} y={yOffset + (yOffset * Math.floor(idx / rows))} delay={elem.delay} color={elem.color} radius={radius}/>\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n      \t\t\t\t</Layer>\n    \t\t\t</Stage>\n\t\t</header>\n\t</div>\n  \t);\n}\n\n\nexport default Programming;\n"]},"metadata":{},"sourceType":"module"}