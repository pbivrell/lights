{"ast":null,"code":"import _slicedToArray from\"/Users/pbivrell/light/light/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{useFormFields,displayError}from\"../lib/hooks\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var callback=_ref.callback;var URL=process.env.REACT_APP_API_URL+\"/user\";var _useFormFields=useFormFields({user:\"\",password:\"\"}),_useFormFields2=_slicedToArray(_useFormFields,2),field=_useFormFields2[0],handleFieldChange=_useFormFields2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];function validateConfirmationForm(){return field.user.length>0&&field.password.length>0;}function handleSubmit(event){event.preventDefault();setLoading(true);axios.post(URL,JSON.stringify(field),{withCredentials:true}).then(function(resp){callback();}).catch(function(e){displayError(e);setLoading(false);});}function renderForm(){return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"user\",size:\"lg\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{autoFocus:true,type:\"text\",value:field.user,onChange:handleFieldChange})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",size:\"lg\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:field.password,onChange:handleFieldChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{block:true,size:\"lg\",type:\"submit\",variant:\"success\",disabled:!validateConfirmationForm()||loading,children:!loading?\"Login\":\"loading...\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"Signup\",children:renderForm()});}export default Login;","map":{"version":3,"sources":["/Users/pbivrell/light/light/src/containers/login.js"],"names":["React","useState","Form","Button","useFormFields","displayError","axios","Login","callback","URL","process","env","REACT_APP_API_URL","user","password","field","handleFieldChange","loading","setLoading","validateConfirmationForm","length","handleSubmit","event","preventDefault","post","JSON","stringify","withCredentials","then","resp","catch","e","renderForm"],"mappings":"kJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,OAASC,aAAT,CAAwBC,YAAxB,KAA4C,cAA5C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,QAASC,CAAAA,KAAT,MAA2B,IAAXC,CAAAA,QAAW,MAAXA,QAAW,CAE1B,GAAMC,CAAAA,GAAG,CAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,CAAgC,OAA5C,CAEA,mBAAmCR,aAAa,CAAC,CAChDS,IAAI,CAAE,EAD0C,CAE5CC,QAAQ,CAAE,EAFkC,CAAD,CAAhD,kDAAOC,KAAP,oBAAcC,iBAAd,oBAKA,cAA8Bf,QAAQ,CAAC,KAAD,CAAtC,wCAAOgB,OAAP,eAAgBC,UAAhB,eAEA,QAASC,CAAAA,wBAAT,EAAoC,CACnC,MACOJ,CAAAA,KAAK,CAACF,IAAN,CAAWO,MAAX,CAAoB,CAApB,EACAL,KAAK,CAACD,QAAN,CAAeM,MAAf,CAAwB,CAF/B,CAIA,CAED,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CAE5BA,KAAK,CAACC,cAAN,GAEAL,UAAU,CAAC,IAAD,CAAV,CAEAZ,KAAK,CAACkB,IAAN,CAAWf,GAAX,CAAgBgB,IAAI,CAACC,SAAL,CAAeX,KAAf,CAAhB,CAAuC,CAClCY,eAAe,CAAE,IADiB,CAAvC,EAEKC,IAFL,CAEU,SAACC,IAAD,CAAU,CACnBrB,QAAQ,GACR,CAJD,EAIGsB,KAJH,CAIS,SAACC,CAAD,CAAO,CACf1B,YAAY,CAAC0B,CAAD,CAAZ,CACAb,UAAU,CAAC,KAAD,CAAV,CACA,CAPD,EAQA,CAED,QAASc,CAAAA,UAAT,EAAsB,CACrB,mBACC,MAAC,IAAD,EAAM,QAAQ,CAAEX,YAAhB,wBACC,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,CAA6B,IAAI,CAAC,IAAlC,wBACC,KAAC,IAAD,CAAM,KAAN,uBADD,cAEC,KAAC,IAAD,CAAM,OAAN,EACC,SAAS,KADV,CAEC,IAAI,CAAC,MAFN,CAGC,KAAK,CAAEN,KAAK,CAACF,IAHd,CAIC,QAAQ,CAAEG,iBAJX,EAFD,GADD,cAUC,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,UAAtB,CAAiC,IAAI,CAAC,IAAtC,wBACC,KAAC,IAAD,CAAM,KAAN,uBADD,cAEC,KAAC,IAAD,CAAM,OAAN,EACC,IAAI,CAAC,UADN,CAEC,KAAK,CAAED,KAAK,CAACD,QAFd,CAGC,QAAQ,CAAEE,iBAHX,EAFD,GAVD,cAkBC,aAlBD,cAmBC,KAAC,MAAD,EACC,KAAK,KADN,CAEC,IAAI,CAAC,IAFN,CAGC,IAAI,CAAC,QAHN,CAIC,OAAO,CAAC,SAJT,CAKQ,QAAQ,CAAE,CAACG,wBAAwB,EAAzB,EAA+BF,OALjD,UAQG,CAACA,OAAD,CAAW,OAAX,CAAqB,YARxB,EAnBD,GADD,CAgCA,CAED,mBACC,YAAK,SAAS,CAAC,QAAf,UACEe,UAAU,EADZ,EADD,CAKA,CAED,cAAezB,CAAAA,KAAf","sourcesContent":["import React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { useFormFields, displayError } from \"../lib/hooks\";\nimport axios from \"axios\";\n\nfunction Login({callback}) {\n\n\tconst URL = process.env.REACT_APP_API_URL + \"/user\";\n\n\tconst [field, handleFieldChange] = useFormFields({\n\t\tuser: \"\",\n    \t\tpassword: \"\",\n  \t});\n\n\tconst [loading, setLoading] = useState(false);\n\n\tfunction validateConfirmationForm() {\n\t\treturn (\n      \t\t\tfield.user.length > 0 &&\n      \t\t\tfield.password.length > 0\n    \t\t);\n\t}\n\n\tfunction handleSubmit(event) {\n\n\t\tevent.preventDefault();\n\n\t\tsetLoading(true);\n\n\t\taxios.post(URL, JSON.stringify(field) ,{\n    \t\t\twithCredentials: true \n  \t\t}).then((resp) => {\n\t\t\tcallback()\n\t\t}).catch((e) => {\n\t\t\tdisplayError(e);\n\t\t\tsetLoading(false);\n\t\t});\n\t}\n\n\tfunction renderForm() {\n\t\treturn (\n\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t<Form.Group controlId=\"user\" size=\"lg\">\n\t\t\t\t\t<Form.Label>Username</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={field.user}\n\t\t\t\t\t\tonChange={handleFieldChange}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<Form.Group controlId=\"password\" size=\"lg\">\n\t\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tvalue={field.password}\n\t\t\t\t\t\tonChange={handleFieldChange}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<br/>\n\t\t\t\t<Button\n\t\t\t\t\tblock\n\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tvariant=\"success\"\n\t\t\t\t        disabled={!validateConfirmationForm() || loading}\n\n\t\t\t\t>\n\t\t\t\t\t{ !loading ? \"Login\" : \"loading...\"}\n\t\t\t\t</Button>\n\t\t\t</Form>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"Signup\">\n\t\t\t{renderForm()}\n\t\t</div>\n\t);\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}