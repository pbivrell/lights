{"ast":null,"code":"import _slicedToArray from\"/Users/pbivrell/light/light/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{useFormFields,displayError}from\"../lib/hooks\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(_ref){var callback=_ref.callback;var URL=process.env.REACT_APP_API_URL+\"/user\";var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useFormFields=useFormFields({email:\"\",id:\"\",password:\"\",confirmPassword:\"\",confirmationCode:\"\"}),_useFormFields2=_slicedToArray(_useFormFields,2),field=_useFormFields2[0],handleFieldChange=_useFormFields2[1];function validateConfirmationForm(){return field.email.length>0&&field.password.length>0&&field.password===field.confirmPassword;}function handleSubmit(event){event.preventDefault();setLoading(true);axios.put(URL,JSON.stringify(field)).then(function(resp){axios.post(URL,JSON.stringify({\"user\":field.id,\"password\":field.password}),{withCredentials:true}).then(function(resp){callback();}).catch(function(e){displayError(e);setLoading(false);});}).catch(function(e){setLoading(false);displayError(e);});}function renderForm(){return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"id\",size:\"lg\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{autoFocus:true,type:\"text\",value:field.id,onChange:handleFieldChange})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",size:\"lg\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{autoFocus:true,type:\"email\",value:field.email,onChange:handleFieldChange})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",size:\"lg\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:field.password,onChange:handleFieldChange})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmPassword\",size:\"lg\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",onChange:handleFieldChange,value:field.confirmPassword})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{block:true,size:\"lg\",type:\"submit\",variant:\"success\",disabled:!validateConfirmationForm()||loading,children:!loading?\"Signup\":\"loading...\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"Signup\",children:renderForm()});}export default Signup;","map":{"version":3,"sources":["/Users/pbivrell/light/light/src/containers/signup.js"],"names":["React","useState","Form","Button","useFormFields","displayError","axios","Signup","callback","URL","process","env","REACT_APP_API_URL","loading","setLoading","email","id","password","confirmPassword","confirmationCode","field","handleFieldChange","validateConfirmationForm","length","handleSubmit","event","preventDefault","put","JSON","stringify","then","resp","post","withCredentials","catch","e","renderForm"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { useFormFields, displayError } from \"../lib/hooks\";\nimport axios from \"axios\";\n\nfunction Signup({callback}) {\n\n\tconst URL = process.env.REACT_APP_API_URL + \"/user\";\n\n\tconst [loading, setLoading] = useState(false);\n\n\tconst [field, handleFieldChange] = useFormFields({\n    \t\temail: \"\",\n\t\tid: \"\",\n    \t\tpassword: \"\",\n\t\tconfirmPassword: \"\",\n    \t\tconfirmationCode: \"\",\n  \t});\n\n\tfunction validateConfirmationForm() {\n\t\treturn (\n      \t\t\tfield.email.length > 0 &&\n      \t\t\tfield.password.length > 0 &&\n      \t\t\tfield.password === field.confirmPassword\n    \t\t);\n\t}\n\n\tfunction handleSubmit(event) {\n\n\t\tevent.preventDefault();\n\n\t\tsetLoading(true);\n\n\t\taxios.put(URL, JSON.stringify(field)).then((resp) => {\n\t\t\taxios.post(URL, JSON.stringify({\n\t\t\t\t\"user\": field.id,\n\t\t\t\t\"password\": field.password,\n\t\t\t}) ,{\n    \t\t\t\twithCredentials: true \n  \t\t\t}).then((resp) => {\n\t\t\t\tcallback()\n\t\t\t}).catch((e) => {\n\t\t\t\tdisplayError(e);\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t\t}).catch((e) => {\n\t\t\tsetLoading(false);\n\t\t\tdisplayError(e);\n\t\t});\n\t}\n\n\tfunction renderForm() {\n\t\treturn (\n\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t<Form.Group controlId=\"id\" size=\"lg\">\n\t\t\t\t\t<Form.Label>Username</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={field.id}\n\t\t\t\t\t\tonChange={handleFieldChange}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<Form.Group controlId=\"email\" size=\"lg\">\n\t\t\t\t\t<Form.Label>Email</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tvalue={field.email}\n\t\t\t\t\t\tonChange={handleFieldChange}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<Form.Group controlId=\"password\" size=\"lg\">\n\t\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tvalue={field.password}\n\t\t\t\t\t\tonChange={handleFieldChange}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<Form.Group controlId=\"confirmPassword\" size=\"lg\">\n\t\t\t\t\t<Form.Label>Confirm Password</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tonChange={handleFieldChange}\n\t\t\t\t\t\tvalue={field.confirmPassword}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<br/>\n\t\t\t\t<Button\n\t\t\t\t\tblock\n\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tvariant=\"success\"\n\t\t\t\t        disabled={!validateConfirmationForm() || loading}\n\n\t\t\t\t>\n\t\t\t\t\t{ !loading ? \"Signup\" : \"loading...\" }\n\t\t\t\t</Button>\n\t\t\t</Form>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"Signup\">\n\t\t\t{renderForm()}\n\t\t</div>\n\t);\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}