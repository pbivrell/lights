{"ast":null,"code":"import _slicedToArray from\"/Users/pbivrell/light/light/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{useFormFields,displayError}from\"../lib/hooks\";import axios from\"axios\";import'./lightsettings.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function LightSettings(_ref){var light=_ref.light,hub=_ref.hub,callback=_ref.callback;var URL=\"\".concat(process.env.REACT_APP_API_URL,\"/user/hub/\").concat(hub,\"/light/\").concat(light.ID);var _useFormFields=useFormFields({Alias:light.Alias,Count:parseInt(light.Count)}),_useFormFields2=_slicedToArray(_useFormFields,2),field=_useFormFields2[0],handleFieldChange=_useFormFields2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];function validateConfirmationForm(){return field.Count>0;}function handleSubmit(event){event.preventDefault();setLoading(true);field.Count=parseInt(field.Count);console.log(field);axios.post(URL,JSON.stringify(field),{withCredentials:true}).then(function(resp){setLoading(false);callback();}).catch(function(e){displayError(e);setLoading(false);});}function renderForm(){return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,className:\"SettingForm\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\"ID: \",light.ID]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"Alias\",size:\"lg\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Alias:\"}),/*#__PURE__*/_jsx(Form.Control,{autoFocus:true,className:\"SettingsFormInput\",type:\"text\",value:field.Alias,onChange:handleFieldChange})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"Count\",size:\"lg\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Bulbs:\"}),/*#__PURE__*/_jsx(Form.Control,{autoFocus:true,className:\"SettingsFormInput\",type:\"number\",value:parseInt(field.Count),onChange:handleFieldChange})]}),/*#__PURE__*/_jsx(Form.Label,{children:new Date(light.Updated).toLocaleDateString()+\" \"+new Date(light.Updated).toLocaleTimeString()}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{block:true,size:\"sm\",type:\"submit\",variant:\"success\",disabled:!validateConfirmationForm()||loading,children:!loading?\"Update\":\"loading...\"})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"Signup\",children:renderForm()});}export default LightSettings;","map":{"version":3,"sources":["/Users/pbivrell/light/light/src/containers/lightsettings.js"],"names":["React","useState","Form","Button","useFormFields","displayError","axios","LightSettings","light","hub","callback","URL","process","env","REACT_APP_API_URL","ID","Alias","Count","parseInt","field","handleFieldChange","loading","setLoading","validateConfirmationForm","handleSubmit","event","preventDefault","console","log","post","JSON","stringify","withCredentials","then","resp","catch","e","renderForm","Date","Updated","toLocaleDateString","toLocaleTimeString"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { useFormFields, displayError } from \"../lib/hooks\";\nimport axios from \"axios\";\nimport './lightsettings.css';\n\nfunction LightSettings({light, hub, callback}) {\n\n\tconst URL = `${process.env.REACT_APP_API_URL}/user/hub/${hub}/light/${light.ID}`\n\n\tconst [field, handleFieldChange] = useFormFields({\n\t\tAlias: light.Alias,\n\t\tCount: parseInt(light.Count),\n  \t});\n\n\t\n\n\n\tconst [loading, setLoading] = useState(false);\n\n\tfunction validateConfirmationForm() {\n\t\treturn (\n      \t\t\tfield.Count > 0\n    \t\t);\n\t}\n\n\tfunction handleSubmit(event) {\n\n\t\tevent.preventDefault();\n\n\t\tsetLoading(true);\n\n\t\tfield.Count = parseInt(field.Count);\n\t\tconsole.log(field);\n\t\taxios.post(URL, JSON.stringify(field) ,{\n    \t\t\twithCredentials: true \n  \t\t}).then((resp) => {\n\t\t\tsetLoading(false);\n\t\t\tcallback();\n\t\t}).catch((e) => {\n\t\t\tdisplayError(e);\n\t\t\tsetLoading(false);\n\t\t});\n\t}\n\n\tfunction renderForm() {\n\t\treturn (\n\t\t\t<Form onSubmit={handleSubmit} className=\"SettingForm\">\n\t\t\t\t<Form.Label>ID: {light.ID}</Form.Label><br/>\n\t\t\t        <Form.Group controlId=\"Alias\" size=\"lg\">\n\t\t\t\t\t<Form.Label>Alias:</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"SettingsFormInput\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={field.Alias}\n\t\t\t\t\t\tonChange={handleFieldChange}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t        <Form.Group controlId=\"Count\" size=\"lg\">\n\t\t\t\t\t<Form.Label>Bulbs:</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\tclassName=\"SettingsFormInput\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tvalue={parseInt(field.Count)}\n\t\t\t\t\t\tonChange={handleFieldChange}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<Form.Label>{new Date(light.Updated).toLocaleDateString() +\" \" +  new Date(light.Updated).toLocaleTimeString()}</Form.Label>\n\t\t\t\t<br/>\n\t\t\t\t<Button\n\t\t\t\t\tblock\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tvariant=\"success\"\n\t\t\t\t        disabled={!validateConfirmationForm() || loading}\n\n\t\t\t\t>\n\t\t\t\t\t{ !loading ? \"Update\" : \"loading...\"}\n\t\t\t\t</Button>\n\t\t\t</Form>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"Signup\">\n\t\t\t{renderForm()}\n\t\t</div>\n\t);\n}\n\nexport default LightSettings;\n"]},"metadata":{},"sourceType":"module"}